/*!
 *
 * @author Collin Hover / http://collinhover.com
 *
 */
var CKH=(function(C){var p,c={},a={},q={},x="classes/",F="presentations/",u,e,v,r,w,z=false,f=z,g,d,A=15;C.classes={};C.classes.AddClass=m;C.classes.AddProjects=B;C.classes.AddCalendar=i;$LAB.script(["js/jquery-1.7.2.min.js","js/RequestAnimationFrame.js","js/RequestInterval.js","js/RequestTimeout.js","js/prettify.min.js"]).wait().script(["js/jmpress.all.min.js","js/bootstrap.min.js","js/jquery.throttle-debounce.custom.min.js","js/jquery.easing-1.3.min.js","js/jquery.imagesloaded.min.js"]).wait(G);function G(){$(document).ready(t)}function t(){var I,H;p=$.jmpress("defaults");p.hash.use=false;p.fullscreen=false;p.notSupportedClass="static-presentation";p.viewPort.zoomBindMove=false;p.viewPort.zoomBindWheel=false;p.viewPort.maxScale=1;$.jmpress("template","fallback",{children:function(M,L,N){var K=$(L),J=M*K.outerWidth(true);return{x:J,template:"fallback"}}});$.jmpress("afterDeinit",function(K){var J=$(K);if(a.$presentationsRemove.is(J)){a.$presentationsRemove=a.$presentationsRemove.not(J);J.remove()}});c.OnResize=$.throttle(500,b);a.$logo=$(".logo");a.$mainNav=$("#mainNav");a.$mainNavToggle=a.$mainNav.find('[data-toggle="collapse"]');a.$overview=$("#overview");a.$policies=$("#policies");a.$classes=$("#classes");a.$class=$("#class");a.$classHeader=$("#classHeader");a.$classContent=$("#classContent");a.$className=$(".class-name");a.$classSummary=$(".class-summary");a.$classNav=$("#classNav");a.$classNavWrapper=$("#classNavWrapper");a.$classNavListMain=$("#classNavListMain");a.$classNavListAlt=$("#classNavListAlt");a.$classSetup=$("#classSetup");a.$classSetupHeader=$("#classSetupHeader");a.$classSetupBody=$("#classSetupBody");a.$classProjects=$();a.$classProjectsLink=$('<a href="#classProjects">Projects</a>');a.$classCalendar=$();a.$classCalendarLink=$('<a href="#classCalendar">Calendar</a>');a.$presentations=$("#presentations");a.$presentationsControl=$("#presentationsControl");a.$presentationsNav=$("#presentationsNav");a.$presentationsRemove=$();a.$presentationWrapper=$("#presentationWrapper");a.$presentation=$("#presentation");a.$presentationPlaceholder=$("#presentationPlaceholder");a.$presentationSetup=$("#presentationSetup");a.$presentationSetupInner=$("#presentationSetupInner");a.$presentationFullscreenToggle=$("#presentationFullscreenToggle");a.$presentationName=$(".presentation-name");a.$presentationDescription=$(".presentation-description");a.$icons=$("i");a.$tabs=$(".tab-pane");a.$tabToggles=$(".tab-toggles").find('[href^="#"]');a.$buttonsDropdown=$('[data-toggle="dropdown"]');a.$buttonsClasses=$(".button-class");a.$buttonsPresentations=$(".button-presentation");q.$presentation=a.$presentation.clone(true);q.$projectsContainer=$('<section id="classProjects"><div class="page-header"><h1>Projects <small>public service announcement: get back to work</small></h1></div><div id="projectsEmptyWarning" class="container-center"><div class="separate"><img src="img/alertcircle_rev_64.png" alt="Alert"></div><p>All the projects have run off!</p><p><small>not to worry, they are probably around here somewhere...</small></p></div></section>');q.$projectsAccordion=$('<div id="projectsAccordion" class="accordion"></div>');q.$projectResource=$('<p class="project-resource"><a target="_blank" class="project-resource-link"></a></p>');q.$projectRequirement=$('<div class="requirement-item"><div class="requirement-item-checkbox"></div><span class="requirement-item-text"></span></div>');q.$calendar=$('<section id="classCalendar"><div class="page-header"><h1>Calendar</h1></div></section>');q.$calendarEmbed=$('<iframe src="" class="calendar-embed" frameborder="0" scrolling="no" type="text/html"></iframe>');q.$calendarLink=$('<div class="hero-anchor"><p><small>Calendar not working right?</small></p><a href="" target="_blank" class="btn btn-large btn-primary calendar-link"><i class="icon-calendar icon-white"></i> Open Simple Calendar</a></div>');g=a.$mainNav.outerHeight(true);d=parseInt(a.$presentations.css("padding-top"))+parseInt(a.$presentations.css("padding-bottom"));z=a.$presentations.hasClass("fullscreen");a.$mainNav.find('a[href^="#"]').not(a.$mainNavToggle).each(function(){var J=$(this);if(J.attr("href")!=="#"){J.on(Modernizr.touch?"touchend":"click",function(K){a.$mainNavToggle.click()})}});a.$tabToggles.each(function(){var J=$(this),K=$(J.data("section"));J.on(Modernizr.touch?"touchend":"click",function(L){if(u!==J.attr("href")){J.tab("show")}else{if(K.length>0){window.location.hash="#"+K.attr("id");K[0].scrollIntoView(true);L.preventDefault()}}}).on("show",function(){u=J.attr("href")}).on("shown",function(){b();if(K.length>0){window.location.hash="#"+K.attr("id");K[0].scrollIntoView(true)}if(u==="#presentations"&&a.$presentation.jmpress("initialized")===true){E()}})});a.$buttonsDropdown.parent().each(function(){var J=$(this);J.find(".dropdown-menu a").each(function(){var K=$(this);K.on(Modernizr.touch?"touchend":"click",function(){K.parent().removeClass("active");J.removeClass("open")}).on("shown",function(){K.parent().removeClass("active")})})});a.$classNav.affix({offset:{top:function(){return a.$classNavWrapper.offset().top-g}}});a.$buttonsClasses.each(function(){var K=$(this),J;J=$.trim(K.data("url")).replace(x,"");K.on(Modernizr.touch?"touchend":"click",function(){if(typeof J==="string"&&J.length>0&&J!==e){v=false;a.$classProjects=$();a.$classCalendar=$();a.$classContent.empty().removeClass("hidden");a.$classHeader.removeClass("hidden");a.$classSetup.removeClass("hidden");a.$classSetupHeader.html("Class loading...");a.$classSetupBody.removeClass("alert-danger").addClass("alert-success").html("<strong>One sec,</strong> looking up that class you selected.");e=J;a.$classContent.load(x+J,function(L,M){if(M==="error"){a.$classSetupHeader.html("Oops!");a.$classSetupBody.removeClass("alert-success").addClass("alert-danger").html('<strong>This is embarrassing! </strong> Looks like that class got lost somewhere... try again or <a href="#overview">let me know</a>.')}else{if(window.localStorage){window.localStorage._currentClassURL=e}a.$classSetup.addClass("hidden");k();n();c.OnResize();v=true}})}})});a.$buttonsPresentations.each(function(){var K=$(this),J;K.attr("href","#presentations");J=$.trim(K.data("url")).replace(F,"");K.on(Modernizr.touch?"touchend":"click",function(){if(typeof J==="string"&&J.length>0){a.$presentationPlaceholder.empty();a.$presentationSetup.removeClass("hidden").removeClass("alert-danger").addClass("alert-success");a.$presentationSetupInner.html("<strong>One sec,</strong> preparing that presentation for you!");r=J;a.$presentationPlaceholder.load(F+J,function(L,M){if(M==="error"){a.$presentationSetup.removeClass("alert-success").addClass("alert-danger");a.$presentationSetupInner.html("<strong>Oops, this is embarrassing!</strong> Looks like that presentation got lost somewhere... try again or let me know.")}else{j();h();a.$presentation.focus()}})}})});prettyPrint();$(window).on("resize",c.OnResize);a.$tabToggles.filter('[href="#presentations"]').one("shown",j);if(window.location.hash&&window.location.hash.length>0){H=a.$tabToggles.filter('[href="'+window.location.hash+'"]');if(H.length===0){I=window.location.hash.replace("#","");a.$tabs.each(function(){var K=$(this),J;J=K.find('[id="'+I+'"]');if(J.length>0){H=a.$tabToggles.filter('[href="#'+K.attr("id")+'"]');return false}});if(H.length>1){H=H.filter('[data-section="#'+I+'"]')}}}if(typeof H==="undefined"||H.length===0){H=a.$tabToggles.filter('[href="#overview"]')}H.tab("show")}function b(){var J,H,I;if(u==="#presentations"){J=$(window).innerHeight();H=J-g;if($(window).innerWidth()<768){I=J-a.$presentationsControl.outerHeight(true)-d}else{if(z===true){I=H-a.$presentationsControl.outerHeight(true)}else{I=H-a.$presentationsControl.outerHeight(true)-d}}a.$presentation.css("min-height",I)}if(u==="#classes"){a.$classNavWrapper.css("height",a.$classNav.outerHeight(true))}}function y(){this.collapse("toggle")}function s(){var H=$(this),I=H.attr("id");H.toggleClass("complete");if(window.localStorage){window.localStorage[I]=H.hasClass("complete")}}function l(H){if(typeof w!=="undefined"){window.clearRequestTimeout(w);w=undefined}$(window).off("keyup",D);if(H!==true||z===true){a.$presentationSetupInner.toggleClass("container");a.$presentations.toggleClass("fullscreen")}f=z;z=a.$presentations.hasClass("fullscreen");if(z!==f){if(z===true){$(window).on("keyup",D)}c.OnResize();w=window.requestTimeout(function(){h();a.$presentation.focus()},200)}}function D(I){var H=((I.which||I.key||I.keyCode)+"").toLowerCase();if(H==="27"){l()}}function m(J){var I,H;if(J&&typeof J.name!=="undefined"){I=$.trim(J.name);a.$className.html(I);if(typeof J.summary==="string"){a.$classSummary.removeClass("hidden").html(J.summary)}else{a.$classSummary.addClass("hidden")}a.$classNavListMain.empty();a.$classNavListAlt.empty();H=J.navigation;if(H.main){$.each(H.main,function(L,K){o(K,a.$classNavListMain)})}if(H.alt){$.each(H.alt,function(L,K){o(K,a.$classNavListAlt)})}o('<a href="#classes"><h6>'+I+"</h6></a>",a.$classNavListAlt);B(J.projects);i(J.calendar)}}function o(K,J){var I=$(K),H;if(J&&J.length>0&&a.$classNav.find(I).length===0){I.appendTo(J).wrap($("<li></li>"))}}function B(P){var V,Q,L,aa,T,X,O,W,N,K,U,R,M,Z,H=[],S={},Y,J,I;if(Object.prototype.toString.call(P)==="[object Array]"){for(V=0,Q=P.length;V<Q;V++){B(P[V])}}else{if(P&&typeof P.name!=="undefined"&&typeof P.summary!=="undefined"&&typeof P.time!=="undefined"){aa=$.trim(P.name);T=e+"_Project_"+aa;L=$('<div class="accordion-group project"><div class="accordion-heading"><a class="accordion-toggle"><h4 class="project-name"></h4></a></div><div class="accordion-body"><div class="accordion-inner"><div class="row"><div class="span3"><div class="hero-anchor"><h6>Summary</h6><p class="project-summary"></p></div><div class="hero-anchor"><h6>What You Can Use</h6><p class="project-usables"></p></div><div class="hero-anchor"><h6>Timeline</h6><p class="project-time"></p><div class="progress progress-success progress-striped"><div id="puzzleActiveScoreBar" class="bar project-timebar" style="width: 0%;"></div></div></div><div class="hero-anchor project-files"><h6>Files</h6></div><div class="hero-anchor project-links"><h6>Links</h6></div></div><div class="span8 project-requirements"><h6>Requirements</h6></div></div></div></div></div>');L.attr("id",T).find(".project-name").html(aa).end().find(".project-summary").html(P.summary).end().find(".project-usables").html(P.usables||"Anything").end().find(".project-time").html(P.time+" / "+(P.timeMax||A)+" weeks").end().find(".project-timebar").css("width",(P.time/(P.timeMax||A)*100)+"%");O=P.files;W=L.find(".project-files");if(O&&O.length>0){for(V=0,Q=O.length;V<Q;V++){X=O[V];N=q.$projectResource.clone(true);N.attr("id",$.trim(X.id)).find(".project-resource-link").attr("href",$.trim(X.url)).html($.trim(X.text));W.append(N)}}else{W.addClass("hidden")}K=P.links;U=L.find(".project-links");if(K&&K.length>0){for(V=0,Q=K.length;V<Q;V++){X=K[V];R=q.$projectResource.clone(true);R.attr("id",$.trim(X.id)).find(".project-resource-link").attr("href",$.trim(X.url)).html($.trim(X.text));U.append(R)}}else{U.addClass("hidden")}M=P.requirements;Z=L.find(".project-requirements");if(M&&M.length>0){for(V=0,Q=M.length;V<Q;V++){X=M[V];I=q.$projectRequirement.clone(true);J=$.trim(X.text);Y=T+"_Requirement_"+J;if(H.indexOf(Y)!==-1){S[Y]++}else{H.push(Y);S[Y]=0}Y+="_"+S[Y];if(window.localStorage){I[window.localStorage[Y]==="true"?"addClass":"removeClass"]("complete")}I.attr("id",Y).on(Modernizr.touch?"touchend":"click",s).find(".requirement-item-text").html(J);Z.append(I)}}else{Z.addClass("hidden")}a.$classProjects=a.$classProjects.add(L)}}}function k(){a.$classProjectsContainer=q.$projectsContainer.clone(true);a.$classContent.append(a.$classProjectsContainer);a.$classProjectsAccordion=q.$projectsAccordion.clone(true);a.$classProjectsContainer.append(a.$classProjectsAccordion);if(a.$classProjects.length>0){a.$classProjectsContainer.find("#projectsEmptyWarning").addClass("hidden");a.$classProjects.each(function(J,I){var K=$(this),H=K.find(".accordion-body");a.$classProjectsAccordion.append(K);H.addClass("collapse");K.find(".accordion-toggle").on(Modernizr.touch?"touchend":"click",$.proxy(y,H))})}o(a.$classProjectsLink,a.$classNavListMain)}function i(H){if(H&&H.embed||H.link){a.$classCalendar=q.$calendar.clone(true);if(H.embed){q.$calendarEmbed.clone(true).appendTo(a.$classCalendar).attr("src",H.embed)}if(H.link){q.$calendarLink.clone(true).appendTo(a.$classCalendar).find(".calendar-link").attr("href",H.link)}}}function n(){if(a.$classCalendar.length>0){a.$classContent.append(a.$classCalendar);o(a.$classCalendarLink,a.$classNavListMain)}}function j(){var H,I;I=a.$presentationPlaceholder.find(".step");if(I.length>0){H=a.$presentation;a.$presentation=q.$presentation.clone(true).insertAfter(a.$presentationPlaceholder);if(H.jmpress("initialized")){a.$presentationsRemove=a.$presentationsRemove.add(H);H.addClass("hidden").jmpress("deinit")}else{H.remove()}a.$presentation.append(I).jmpress();a.$presentation.jmpress("canvas").width(0).height(0);prettyPrint();b();a.$presentation.imagesLoaded(function(){a.$presentationSetup.addClass("hidden");I.each(function(M,L){var J=$(L),K=J.data("stepData");K.viewPortWidth=J.outerWidth(true);K.viewPortHeight=J.outerHeight(true)});b();E()})}}function h(){a.$presentations[0].scrollIntoView(true)}function E(){a.$presentation.jmpress("select",a.$presentation.jmpress("active"))}return C})(CKH||{});